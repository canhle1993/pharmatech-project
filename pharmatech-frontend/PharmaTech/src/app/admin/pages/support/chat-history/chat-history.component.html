<div class="chat-history">
  <div class="user-list">
    <!-- Hiển thị tất cả người dùng dưới dạng các ô -->
    <div
      class="user-item"
      *ngFor="let user of users"
      (click)="openChat(user)"
    >
      <div class="user-box">
        <span class="user-name">{{ user.name || user.username }}</span>
      </div>
    </div>
  </div>

  <!-- Hiển thị khung chat khi một user được chọn -->
  <div *ngIf="currentUser" class="chat-box">
    <header class="chat-header">
      <strong>{{ currentUser.name || currentUser.username }}</strong>
    </header>

    <div class="chat-content">
      <!-- Hiển thị các tin nhắn giữa admin và user -->
      <div *ngFor="let message of history">
        <div [class.admin]="message.fromRole === 'admin'" class="message-bubble">
          <span class="message-text">{{ message.text }}</span>
          <span class="message-time">{{ message.createdAt | date: 'short' }}</span>
        </div>
      </div>
    </div>

    <form (submit)="sendMessage()" class="chat-input">
      <input
        [(ngModel)]="newMessage"
        name="message"
        placeholder="Nhập tin nhắn..."
        autocomplete="off"
        required
      />
      <button type="submit">Gửi</button>
    </form>
  </div>
</div>
